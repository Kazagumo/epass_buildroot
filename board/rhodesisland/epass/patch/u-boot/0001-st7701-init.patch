--- a/board/sunxi/board.c
+++ b/board/sunxi/board.c
@@ -913,6 +913,308 @@
 	return 0;
 }
 
+
+// I know this is ugly
+typedef enum {
+	BEGIN_WRITE,
+	WRITE_COMMAND_8,
+	WRITE_C8_D8,
+	WRITE_C8_D16,
+	WRITE_BYTES,
+	END_WRITE,
+	DELAY
+} st7701_init_op_t;
+
+static const uint8_t st7701_init_seq[] = {
+    BEGIN_WRITE,
+
+    WRITE_COMMAND_8, 0xFF,
+    WRITE_BYTES, 5, 0x77, 0x01, 0x00, 0x00, 0x13,
+
+    WRITE_C8_D8, 0xEF, 0x08,
+
+    WRITE_COMMAND_8, 0xFF,
+    WRITE_BYTES, 5, 0x77, 0x01, 0x00, 0x00, 0x10,
+
+    WRITE_C8_D16, 0xC0, 0x4f, 0x00,
+    // WRITE_C8_D16, 0xC0, 0x2C, 0x00,
+    WRITE_C8_D16, 0xC1, 0x0D, 0x02,
+    WRITE_C8_D16, 0xC2, 0x31, 0x05,
+    // WRITE_C8_D8, 0xC3, 0x02,
+    WRITE_COMMAND_8, 0xC3,
+    WRITE_BYTES, 3, 0x82,0x18,0x0e,
+
+    WRITE_C8_D8, 0xCC, 0x10,
+
+    WRITE_COMMAND_8, 0xB0, // Positive Voltage Gamma Control
+    WRITE_BYTES, 16,
+    0x0A, 0x14, 0x1B, 0x0D,
+    0x10, 0x05, 0x07, 0x08,
+    0x06, 0x22, 0x03, 0x11,
+    0x10, 0xAD, 0x31, 0x1B,
+
+    WRITE_COMMAND_8, 0xB1, // Negative Voltage Gamma Control
+    WRITE_BYTES, 16,
+    0x0A, 0x14, 0x1B, 0x0D,
+    0x10, 0x05, 0x07, 0x08,
+    0x06, 0x22, 0x03, 0x11,
+    0x10, 0xAD, 0x31, 0x1B,
+
+    WRITE_COMMAND_8, 0xFF,
+    WRITE_BYTES, 5, 0x77, 0x01, 0x00, 0x00, 0x11,
+
+    WRITE_C8_D8, 0xB0, 0x50,
+    WRITE_C8_D8, 0xB1, 0x5E,
+    WRITE_C8_D8, 0xB2, 0x87,
+    WRITE_C8_D8, 0xB3, 0x80,
+    WRITE_C8_D8, 0xB5, 0x47,
+    WRITE_C8_D8, 0xB7, 0x85,
+    WRITE_C8_D8, 0xB8, 0x21,
+
+    WRITE_C8_D8, 0xC1, 0x78,
+    WRITE_C8_D8, 0xC2, 0x78,
+
+
+    WRITE_C8_D8, 0xD0, 0x88,
+
+    WRITE_C8_D8, 0xE0, 0x00,
+
+    WRITE_C8_D8, 0x1B, 0x02,
+
+    WRITE_COMMAND_8, 0xE1,
+    WRITE_BYTES, 11,
+    0x08, 0xA0, 0x00, 0x00,
+    0x07, 0xA0, 0x00, 0x00,
+    0x00, 0x44, 0x44,
+
+    WRITE_COMMAND_8, 0xE2,
+    WRITE_BYTES, 12,
+    0x11, 0x11, 0x44, 0x44,
+    0x75, 0xA0, 0x00, 0x00,
+    0x74, 0xA0, 0x00, 0x00,
+
+    WRITE_COMMAND_8, 0xE3,
+    WRITE_BYTES, 4, 0x00, 0x00, 0x11, 0x11,
+
+    WRITE_C8_D16, 0xE4, 0x44, 0x44,
+
+    WRITE_COMMAND_8, 0xE5,
+    WRITE_BYTES, 16,
+    0x0A, 0x71, 0xD8, 0xA0,
+    0x0C, 0x73, 0xD8, 0xA0,
+    0x0E, 0x75, 0xD8, 0xA0,
+    0x10, 0x77, 0xD8, 0xA0,
+
+    WRITE_COMMAND_8, 0xE6,
+    WRITE_BYTES, 4, 0x00, 0x00, 0x11, 0x11,
+
+    WRITE_C8_D16, 0xE7, 0x44, 0x44,
+
+    WRITE_COMMAND_8, 0xE8,
+    WRITE_BYTES, 16,
+    0x09, 0x70, 0xD8, 0xA0,
+    0x0B, 0x72, 0xD8, 0xA0,
+    0x0D, 0x74, 0xD8, 0xA0,
+    0x0F, 0x76, 0xD8, 0xA0,
+
+    WRITE_COMMAND_8, 0xEB,
+    WRITE_BYTES, 7,
+    0x02, 0x00, 0xE4, 0xE4,
+    0x88, 0x00, 0x40,
+
+    WRITE_C8_D16, 0xEC, 0x3C, 0x00,
+
+    WRITE_COMMAND_8, 0xED,
+    WRITE_BYTES, 16,
+    0xAB, 0x89, 0x76, 0x54,
+    0x02, 0xFF, 0xFF, 0xFF,
+    0xFF, 0xFF, 0xFF, 0x20,
+    0x45, 0x67, 0x98, 0xBA,
+
+    WRITE_COMMAND_8, 0xEF,
+    WRITE_BYTES, 6,
+    0x08, 0x08, 0x08, 0x45,
+    0x3F, 0x54,
+
+    WRITE_COMMAND_8, 0xFF,
+    WRITE_BYTES, 5, 0x77, 0x01, 0x00, 0x00, 0x13,
+
+    WRITE_C8_D16, 0xE8, 0x00, 0x0E,
+
+    WRITE_COMMAND_8, 0x20,   // 0x20 normal, 0x21 IPS
+    WRITE_C8_D8, 0x3A, 0x50, // 0x70 RGB888, 0x60 RGB666, 0x50 RGB565
+
+    WRITE_COMMAND_8, 0x11, // Sleep Out
+    END_WRITE,
+
+    DELAY, 150,
+
+    BEGIN_WRITE,
+    WRITE_C8_D16, 0xE8, 0x00, 0x0C,
+    END_WRITE,
+
+    DELAY, 100,
+
+    BEGIN_WRITE,
+    WRITE_C8_D16, 0xE8, 0x00, 0x00,
+
+    WRITE_COMMAND_8, 0xFF,
+    WRITE_BYTES, 5, 0x77, 0x01, 0x00, 0x00, 0x00,
+
+    WRITE_COMMAND_8, 0x29, // Display On
+    END_WRITE,
+    DELAY, 20};
+
+// liulianpai
+// #define ST7701_RESET_PIN	SUNXI_GPE(10)
+// #define ST7701_CS_PIN		SUNXI_GPE(9)
+// #define ST7701_SDA_PIN		SUNXI_GPE(8)
+// #define ST7701_SCK_PIN		SUNXI_GPE(7)
+
+#define ST7701_RESET_PIN	SUNXI_GPE(7)
+#define ST7701_CS_PIN		SUNXI_GPE(2)
+#define ST7701_SDA_PIN		SUNXI_GPE(3)
+#define ST7701_SCK_PIN		SUNXI_GPD(19)
+
+
+#define GPIO_BANK(pin)		((pin) >> 5)
+#define GPIO_NUM(pin)		((pin) & 0x1f)
+#define GPIO_DAT_REG_OFFSET	0x10
+#define SUNXI_PINCTRL_BANK_SIZE	0x24
+
+static void sunxi_gpio_set_value_bank(void *bank_base, int pin, bool set)
+{
+	uint32_t mask = 1U << pin;
+
+	clrsetbits_le32(bank_base + GPIO_DAT_REG_OFFSET,
+			set ? 0 : mask, set ? mask : 0);
+}
+
+//static void* BANK_TO_GPIO(int bank)
+//{
+//	void *pio_base;
+
+//	if (bank < SUNXI_GPIO_L) {
+//		pio_base = (void *)(uintptr_t)SUNXI_PIO_BASE;
+//	} else {
+//		pio_base = (void *)(uintptr_t)SUNXI_R_PIO_BASE;
+//		bank -= SUNXI_GPIO_L;
+//	}
+
+//	return pio_base + bank * SUNXI_PINCTRL_BANK_SIZE;
+//}
+
+static void sunxi_gpio_set_value(u32 pin, bool set)
+{
+	u32 bank = GPIO_BANK(pin);
+	void *pio = BANK_TO_GPIO(bank);
+
+	sunxi_gpio_set_value_bank(pio, GPIO_NUM(pin), set);
+}
+
+inline static void st7701_write_comm(uint8_t value){
+	sunxi_gpio_set_value(ST7701_SCK_PIN, 0);
+	sunxi_gpio_set_value(ST7701_SDA_PIN, 0);
+	sunxi_gpio_set_value(ST7701_SCK_PIN, 1);
+
+
+	for(int i=0; i<8; i++){
+		sunxi_gpio_set_value(ST7701_SCK_PIN, 0);
+		if(value & 0x80){
+			sunxi_gpio_set_value(ST7701_SDA_PIN, 1);
+		} else {
+			sunxi_gpio_set_value(ST7701_SDA_PIN, 0);
+		}
+		value <<= 1;
+		sunxi_gpio_set_value(ST7701_SCK_PIN, 1);
+	}
+	
+	sunxi_gpio_set_value(ST7701_SCK_PIN, 0);
+
+}
+
+inline static void st7701_write_data(uint8_t value){
+	sunxi_gpio_set_value(ST7701_SCK_PIN, 0);
+	sunxi_gpio_set_value(ST7701_SDA_PIN, 1);
+	sunxi_gpio_set_value(ST7701_SCK_PIN, 1);
+
+
+	for(int i=0; i<8; i++){
+		sunxi_gpio_set_value(ST7701_SCK_PIN, 0);
+		if(value & 0x80){
+			sunxi_gpio_set_value(ST7701_SDA_PIN, 1);
+		} else {
+			sunxi_gpio_set_value(ST7701_SDA_PIN, 0);
+		}
+		value <<= 1;
+		sunxi_gpio_set_value(ST7701_SCK_PIN, 1);
+	}
+
+	sunxi_gpio_set_value(ST7701_SCK_PIN, 0);
+}
+
+
+static void setup_st7701(void){
+	printf("srgn:setup st7701\n");
+
+	// sunxi_gpio_set_cfgpin(ST7701_RESET_PIN, SUNXI_GPIO_OUTPUT);
+	sunxi_gpio_set_cfgpin(ST7701_CS_PIN, SUNXI_GPIO_OUTPUT);
+	sunxi_gpio_set_cfgpin(ST7701_SDA_PIN, SUNXI_GPIO_OUTPUT);
+	sunxi_gpio_set_cfgpin(ST7701_SCK_PIN, SUNXI_GPIO_OUTPUT);
+
+	sunxi_gpio_set_value(ST7701_CS_PIN, 1);
+	sunxi_gpio_set_value(ST7701_SCK_PIN, 0);
+	sunxi_gpio_set_value(ST7701_SDA_PIN, 0);
+	// sunxi_gpio_set_value(ST7701_RESET_PIN, 0);
+	// mdelay(120);
+	// sunxi_gpio_set_value(ST7701_RESET_PIN, 1);
+	// mdelay(120);
+
+	int i = 0;
+	while(i < sizeof(st7701_init_seq)){
+		st7701_init_op_t op = st7701_init_seq[i++];
+		switch (op){
+			case BEGIN_WRITE:
+				sunxi_gpio_set_value(ST7701_CS_PIN, 0);
+				break;
+			case WRITE_COMMAND_8:
+				st7701_write_comm(st7701_init_seq[i++]);
+				break;
+			case WRITE_C8_D8:
+				st7701_write_comm(st7701_init_seq[i++]);
+				st7701_write_data(st7701_init_seq[i++]);
+				break;
+			case WRITE_C8_D16:
+				st7701_write_comm(st7701_init_seq[i++]);
+				st7701_write_data(st7701_init_seq[i++]);
+				st7701_write_data(st7701_init_seq[i++]);
+				break;
+			case WRITE_BYTES:
+			{
+				int len = st7701_init_seq[i++];
+				for(int j=0; j<len; j++){
+					st7701_write_data(st7701_init_seq[i++]);
+				}
+				break;
+			}
+			case END_WRITE:
+				sunxi_gpio_set_value(ST7701_CS_PIN, 1);
+				break;
+			case DELAY:
+			{
+				int delay = st7701_init_seq[i++];
+				mdelay(delay);
+				break;
+			}
+			default:
+				printf("srgn: unknown st7701 op %d\n", op);
+				return;
+		}
+	}
+	printf("srgn: st7701 init out?\n");
+
+}
+
 int ft_board_setup(void *blob, bd_t *bd)
 {
 	int __maybe_unused r;
@@ -922,7 +1224,7 @@
 	 * ethernet aliases the u-boot copy does not have.
 	 */
 	setup_environment(blob);
-
+	setup_st7701();
 #ifdef CONFIG_VIDEO_DT_SIMPLEFB
 	r = sunxi_simplefb_setup(blob);
 	if (r)
